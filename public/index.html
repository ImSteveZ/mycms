<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My CMS</title>
</head>
<body>
<h1>Hello, MyCMS</h1>
<form id="sign-up-form">
    <input type="text" name="user_name" placeholder="user name"><br>
    <input type="text" name="email" placeholder="email"><br>
    <input type="password" name="password" placeholder="password"><br>
    <input type="password" name="repeat_password" placeholder="repeat password"><br>
    <button onclick="return subForm();">submit</button>
</form>
<script>
    function subForm() {
        var form = document.getElementById("sign-up-form");
        var data = {};
        var url = "/usr/signUp";
        data.user_name = form.querySelector("input[name='user_name']").value;
        data.email = form.querySelector("input[name='email']").value;
        data.password = form.querySelector("input[name='password']").value;
        data.repeat_password = form.querySelector("input[name='repeat_password']").value;
        var jsonData = JSON.stringify(data);
        xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
            if(xhr.readyState == 4 && xhr.status == 200) {
                var resp = JSON.parse(xhr.responseText);
                alert(resp.status + ", " + resp.message);
            }
        };
        xhr.open("POST", url);
        xhr.send(jsonData);
        return false;
    }
</script>
</body>
</html>